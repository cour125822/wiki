---
title: 网络编程
description: 
published: true
date: 2023-03-26T08:03:07.177Z
tags: 
editor: markdown
dateCreated: 2023-02-26T07:52:58.814Z
---

# 传输层协议

## 互联网协议

互联网协议按照功能不同分为osi七层或tcp/ip五层或tcp/ip四层

![https://cloutp.github.io/wiki/Python/08网络编程/01传输层协议/images/1825659-20191021214944865-77757134..png](https://cloutp.github.io/wiki/Python/08%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/01%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8D%8F%E8%AE%AE/images/1825659-20191021214944865-77757134..png)

![https://cloutp.github.io/wiki/Python/08网络编程/01传输层协议/images/1825659-20191021214945829-524193847..png](https://cloutp.github.io/wiki/Python/08%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/01%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8D%8F%E8%AE%AE/images/1825659-20191021214945829-524193847..png)

## **传输层**协议

TCP/UDP协议都是基于端口工作的协议这是重点，后面再讲，先来看，计算机之间通信，到底是谁和谁想通信，是计算机本身吗？是不是应该是我安装在计算机上的应用软件之间想通信(qq,微信等)，那我们现在只是知道了如何定位全世界独一无二的计算机，没办法确定计算机之上的哪款软件需要通信吧?这就需要用到端口

**端口(port):**0～65535用来标识一台计算机之上**基于网络通信**的应用软件，0～1024操作系统自己用的，一般情况下8000之后的端口我们可以任意使用，8000之前的通常会有相应的程序默认使用

ip：能够查到全世界独一无二的计算机

port:能够标识一台机器上的某个程序

ip+port:能够确定全世界范围内一台计算机上的某个程序

### **TCP协议**

当应用程序想通过TCP协议实现远程通信时，彼此之间必须先先建立双向通信通道，基于该双向通道实现数据的远程交互，该双向通道直到任意一方主动断开才会失效

![https://cloutp.github.io/wiki/Python/08网络编程/01传输层协议/images/1825659-20191021214947782-1358252741..png](https://cloutp.github.io/wiki/Python/08%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/01%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8D%8F%E8%AE%AE/images/1825659-20191021214947782-1358252741..png)

### **三次握手**

建立双向通道的过程称之为三次握手,建立通道的发起者可以是客户端也可以是服务端，下面我们就以客户端先主动发起为例

* 客户端会朝服务端发送一个请求询问服务端:"我能不能挖一条通往你家的地道"
* 服务端收到请求，回复说:"好吧 你挖吧"，由于TCP是双向通道，客户端挖向服务端的通道只能给客户端朝服务端发消息使用，服务端要向给客户端发消息是没办法走这一条通道的，需要自己挖一条通往客户端的通道

所以服务端在回复同意客户端挖通道的同时还会问一句:"那我能不能也挖一条通往你家的通道"

* 客户端收到服务端请求后客户端到服务端的通道就挖成功了，然后也会同意服务端的请求，服务端挖向客户端的通道也会成功

总结:之所以称之为三次握手就是因为中间的服务端的同意，和请求合并成了一次请求

### **四次挥手**

建立一个连接需要三次握手，而终止一个连接要经过四次握手

当服务端或者客户端不想再与对方进行通信之后，双方任意一方都可以主动发起断开链接的请求，我们还是以客户端主动发起为例

* 客户端由于已经没有任何需要发送给服务端的消息了，所以发起断开客户端到服务端的通道请求
* 服务端收到该请求后同意了 至此客户端到服务端的单项通道断开
* 服务端这个时候不会立刻朝客户端发器请求说那我也断开到你家的通道吧，服务端需要想想我手上还有没有需要发送给客户端的消息，如果还有的话，那我不能立马断开，先把数据发完才能断

等服务端检查完毕之后发送也没有数据要给客户端了，这个时候就会朝客户端发起断开服务端到客户端的通道请求

* 客户端同意该请求，至此四次挥手完成

总结:挥手必须是四次，中间的两次不能合并成一次，原因就在于需要检查是否还有数据需要给对方发送

### UDP协议

当应用程序希望通过UDP与一个应用程序通信时，传输数据之前源端和终端不建立连接。

当它想传送时就简单地去抓取来自应用程序的数据，并尽可能快地把它扔到网络上。

TCP和UDP类似于

TCP：打电话(你一句我一句，你侬我侬)

UDP: 发短信(管你看不看，发了就不关我事了)

### **总结**

TCP---传输控制协议,提供的是面向连接、可靠的字节流服务。当客户和服务器彼此交换数据前，必须先在双方之间建立一个TCP连接，之后才能传输数据。TCP提供超时重发，丢弃重复数据，检验数据，流量控制等功能，保证数据能从一端传到另一端。 UDP---用户数据报协议，是一个简单的面向数据报的运输层协议。UDP不提供可靠性，它只是把应用程序传给IP层的数据报发送出去，但是并不能保证它们能到达目的地。由于UDP在传输数据报前不用在客户和服务器之间建立一个连接，且没有超时重发等机制，故而传输速度很快

[https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1569413618883&amp;di=7744142ee93dd949c18e0f222f3a97fa&amp;imgtype=0&amp;src=http%3A%2F%2Fimg.wxcha.com%2Ffile%2F201811%2F01%2Faeae7124fe.jpg](https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1569413618883&di=7744142ee93dd949c18e0f222f3a97fa&imgtype=0&src=http%3A%2F%2Fimg.wxcha.com%2Ffile%2F201811%2F01%2Faeae7124fe.jpg))

[socket介绍](https://www.notion.so/socket-ebcbb236a831430d8cee0f4af6d4399d)

[TCP协议通讯](https://www.notion.so/TCP-44c8de3761f5490f87093075f537d6df)

[粘包](https://www.notion.so/622348645ab0429ebbe30cdd52b820e1)

[解决粘包](https://www.notion.so/98e7f50ff05c4d72bb5677b28342f6ef)

[UDP协议通讯](https://www.notion.so/UDP-66b589ff5e814901969d0c6c02ba90cf)