---
title: 文件编码
description: 
published: true
date: 2023-03-06T09:00:51.825Z
tags: 
editor: markdown
dateCreated: 2023-02-26T04:40:47.997Z
---

## 解释

计算机在存储文本文件时会按照特定的规则使用二进制进行编码，读取时会进行解码，之后按照特定的格式进行解码，在内存中统一使用unicode编码，存储时进行编码，读取时解码成unicode，解码格式错误会出现乱码

# 发展历史

**ASCII ：**

1. 只有英文字符和数字的一一对应关系
2. 一个英文字符对应一个Byte，最多可以容纳256个字符

**ASCII扩充后** GBK：

1. 只有中文字符、英文字符与数字的一一对应关系
2. 英文字符对应一个Byte，中文字符对应两个Byte

*# Shift_JIS表的特点：* 1、只有日文字符、英文字符与数字的一一对应关系 *# Euc-kr表的特点：* 1、只有韩文字符、英文字符与数字的一一对应关系 、、、

**整合阶段** Unicode：1994年发布

1. _ 存在所有语言中的所有字符与数字的一一对应关系,即兼容万国字符_ *#*
2. *与传统的字符编码的二进制数都有对应关系，即所有格式都可以转换成Unicode格式编码，同时也可以转换成其他类型字符编码格式*

> _因为保存到硬盘的格式只能是单一国家的特定格式，当产生多编码格式文件时就无法进行处理，同时Unicode是将全部字符当作2Byte进行存储，会导致空间的浪费，也会导致存储时间的变慢，_所以将内存中的unicode二进制写入硬盘或者基于网络传输时必须将其转换成一种精简的格式，这种格式即utf-8（全称Unicode Transformation Format，即unicode的转换格式）

UTF-8是一种针对Unicode的可变长度字符编码，：一个英文字符占1Bytes，一个中文字符占3Bytes，生僻字用更多的Bytes存储 unicode更像是一个过渡版本，我们新开发的软件或文件存入硬盘都采用utf**-**8格式，等过去几十年，所有老编码的文件都淘汰掉之后，会出现一个令人开心的场景，即硬盘里放的都是utf**-**8格式

# 编码与解码

**编码：**由字符转换成内存中的unicode，以及由unicode转换成其他编码的过程，都称为编码encode **解码：**由内存中的unicode转换成字符，以及由其他编码转换成unicode的过程，都称为解码decode

*# coding: 当初文件写入硬盘时采用的编码格式，必须在首行，之后的全部按照设置格式进行解码*

### 字符串encode编码与decode解码的使用

```py
# 1、unicode格式------编码encode-------->其它编码格式
x='上'

# 在python3在'上'被存成unicode
res=x.encode('utf-8') res,type(res)

# unicode编码成了utf-8格式，而编码的结果为bytes类型，可以当作直接当作二进制去使用 (b'\xe4\xb8\x8a', <class 'bytes'>)

# 2、其它编码格式------解码decode-------->unicode格式
res.decode('utf-8')  '上'
```


# Python解释器执行文件

1. 识别文件编码格式，未设置编码格式按照解释器默认格式进行解码
2. 解码文件
3. 代码执行
4. 申请空间存放代码和字符串
5. 代码本身使用unicode存储
6. 字符串在python3使用unicode，python中文件头未指定会按照解释器默认编码，python2可以在字符串前加u设置为Unicode格式

‍

‍